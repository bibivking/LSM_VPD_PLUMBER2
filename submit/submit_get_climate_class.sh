#!/bin/bash

#PBS -m ae
#PBS -P w97
#PBS -q normalbw
#PBS -l walltime=12:00:00
#PBS -l mem=256GB
#PBS -l ncpus=1
#PBS -j oe
#PBS -l wd
#PBS -l storage=gdata/hh5+gdata/w97+scratch/w97

module use /g/data/hh5/public/modules
module load conda/analysis3-22.01

lat=(-33.46480178833008 47.116668701171875 -22.283000946044922 -16.238189697265625 -34.00205993652344\
     -16.10327911376953 -33.61329650878906 -14.063300132751465 -14.159282684326172 -15.25879955291748\ 
     -23.858699798583984 -30.191299438476562 -31.375 -12.495200157165527 -13.17903995513916\
     -38.53234100341797 -36.649898529052734 -17.11750030517578 -27.388099670410156 -17.150699615478516\
     -22.28700065612793 -35.65660095214844 -36.67319869995117 -43.09502029418945 -34.98929977416992\
     51.309165954589844 50.55158996582031 50.30506896972656 -3.01802921295166 -19.916500091552734\
     55.87919998168945 55.905799865722656 55.914398193359375 55.86309814453125 55.91669845581055\
     56.635799407958984 49.2670783996582 49.692501068115234 54.48500061035156 54.25389862060547\
     54.09159851074219 47.21022033691406 46.81533432006836 47.1158332824707 47.285831451416016\
     42.40250015258789 44.59339904785156 30.497800827026367 23.17329978942871 42.04669952392578\
     37.369998931884766 26.74139976501465 49.02465057373047 50.14194107055664 51.100101470947266\
     50.94947052001953 51.079166412353516 50.89310073852539 51.27531051635742 50.786659240722656\
     50.87062454223633 47.80638885498047 50.9636116027832 50.45349884033203 56.48419952392578\
     55.68330001831055 55.53028106689453 55.485870361328125 74.47319793701172 39.345970153808594\
     39.27555847167969 39.942691802978516 37.09793472290039 42.15217971801758 61.84749984741211\
     69.14069366455078 67.99720001220703 67.36186218261719 48.47639846801758 48.84421920776367\
     48.67416000366211 44.71710968017578 45.64305877685547 45.639190673828125 43.741390228271484\
     5.278771877288818 46.69110107421875 -2.319999933242798 52.85879135131836 51.986690521240234\
     41.90409851074219 40.523799896240234 42.380409240722656 42.377220153808594 42.380001068115234\
     41.849361419677734 41.70524978637695 45.81264114379883 45.15258026123047 45.956199645996094\
     46.014678955078125 46.11402130126953 40.606201171875 44.690189361572266 45.200870513916016\
     46.58686065673828 42.408119201660156 42.3902587890625 43.73202896118164 43.72785949707031\
     35.26169967651367 51.97100067138672 52.240299224853516 52.16658020019531 52.76219940185547\
     38.639400482177734 38.54064178466797 38.47650146484375 68.613037109375 56.46152877807617\
     60.80080032348633 13.282899856567383 64.18196868896484 56.60721969604492 51.15353012084961\
     51.45000076293945 36.426700592041016 36.635799407958984 36.60580062866211 31.590700149536133\
     44.064640045166016 44.34529113769531 38.895301818847656 40.00619888305664 38.09000015258789\
     48.307701110839844 41.36650085449219 34.25469970703125 42.53779983520508 45.2041015625\
     28.608577728271484 46.082698822021484 39.32320022583008 38.744110107421875 44.452301025390625\
     44.49919891357422 44.323299407958984 38.049800872802734 40.032901763916016 41.16510009765625\
     41.16490173339844 41.1796989440918 45.945899963378906 65.12370300292969 29.738069534301758\
     29.764799118041992 29.754770278930664 31.789400100708008 31.821399688720703 46.242000579833984\
     38.43159866333008 38.102699279785156 38.108699798583984 45.55979919433594 38.413299560546875\
     45.80590057373047 31.743799209594727 31.736499786376953 -25.019699096679688 -15.43777847290039)
lon=(-66.45980072021484 11.317500114440918 133.24899291992188 145.42715454101562 140.58912658691406\
     145.4468536376953 150.72247314453125 131.31809997558594 131.38800048828125 132.37060546875\
     148.47459411621094 120.65409851074219 115.6500015258789 131.14999389648438 130.79449462890625\
     142.81680297851562 145.57589721679688 145.63009643554688 152.8778076171875 133.35020446777344\
     133.63999938964844 148.15170288085938 145.02940368652344 146.6544952392578 146.2906951904297\
     4.520559787750244 4.746129989624023 5.998050212860107 -54.971435546875 23.56032943725586\
     -98.48390197753906 -98.52469635009766 -98.38059997558594 -98.48500061035156 -98.96440124511719\
     -99.94830322265625 -74.03652954101562 -74.34210205078125 -105.81759643554688 -105.87750244140625\
     -106.00530242919922 8.410440444946289 9.85591983795166 8.537779808044434 7.731939792633057\
     128.09579467773438 123.50920104980469 91.06639862060547 112.53610229492188 116.28359985351562\
     101.18000030517578 115.05809783935547 14.770350456237793 11.866939544677734 10.914299964904785\
     13.512530326843262 10.45300006866455 13.52239990234375 10.65546989440918 13.72128963470459\
     6.449649810791016 11.327500343322754 13.566940307617188 11.45753002166748 9.587220191955566\
     12.08329963684082 12.097220420837402 11.64463996887207 -20.55030059814453 -0.31880998611450195\
     -0.3152799904346466 -5.773359775543213 -2.965830087661743 1.4485000371932983 24.295000076293945\
     27.29503059387207 24.20918083190918 26.63783073425293 2.780139923095703 1.9519100189208984\
     7.0655598640441895 -0.7692999839782715 2.735830068588257 2.737030029296875 3.595829963684082\
     -52.92485809326172 19.601299285888672 113.9000015258789 -6.918139934539795 -8.751810073852539\
     13.605159759521484 14.957440376281738 12.026559829711914 12.026040077209473 12.022199630737305\
     13.588139533996582 12.376110076904297 8.633580207824707 7.582590103149414 11.281319618225098\
     11.045829772949219 11.703339576721191 8.151700019836426 11.091090202331543 9.061039924621582\
     11.433690071105957 11.930009841918945 11.920929908752441 10.290909767150879 10.284440040588379\
     137.07879638671875 4.927000045776367 5.071300029754639 5.743559837341309 16.30940055847168\
     -8.601799964904785 -8.000060081481934 -8.024550437927246 161.3414306640625 32.922080993652344\
     89.35079956054688 30.478300094604492 19.55653953552246 -3.7980599403381348 -0.858299970626831\
     -1.2666699886322021 -99.41999816894531 -99.59750366210938 -97.48880004882812 -110.50920104980469\
     -71.28807830810547 -96.83616638183594 -120.63275146484375 -88.29039764404297 -109.38999938964844\
     -105.10189819335938 -106.23989868164062 -89.87349700927734 -72.17150115966797 -68.74019622802734\
     -80.6715316772461 -89.97920227050781 -86.41310119628906 -92.20001220703125 -121.55740356445312\
     -121.62239837646484 -121.60780334472656 -121.76509857177734 -105.54640197753906 -96.47660064697266\
     -96.47010040283203 -96.439697265625 -90.27230072021484 -147.4875946044922 -82.2187728881836\
     -82.24481964111328 -82.16327667236328 -110.82769775390625 -110.86599731445312 -89.34770202636719\
     -120.96600341796875 -121.64129638671875 -121.6530990600586 -84.71379852294922 -120.95079803466797\
     -90.07990264892578 -110.05220031738281 -109.94190216064453 31.49690055847168 23.25278091430664)
site_name=('AR-SLu' 'AT-Neu' 'AU-ASM' 'AU-Cow' 'AU-Cpr' 'AU-Ctr' 'AU-Cum' 'AU-DaP' 'AU-DaS'\
            'AU-Dry' 'AU-Emr' 'AU-GWW' 'AU-Gin' 'AU-How' 'AU-Lit' 'AU-Otw' 'AU-Rig' 'AU-Rob'\
            'AU-Sam' 'AU-Stp' 'AU-TTE' 'AU-Tum' 'AU-Whr' 'AU-Wrr' 'AU-Ync' 'BE-Bra' 'BE-Lon'\
            'BE-Vie' 'BR-Sa3' 'BW-Ma1' 'CA-NS1' 'CA-NS2' 'CA-NS4' 'CA-NS5' 'CA-NS6' 'CA-NS7'\
            'CA-Qcu' 'CA-Qfo' 'CA-SF1' 'CA-SF2' 'CA-SF3' 'CH-Cha' 'CH-Dav' 'CH-Fru' 'CH-Oe1'\
            'CN-Cha' 'CN-Cng' 'CN-Dan' 'CN-Din' 'CN-Du2' 'CN-HaM' 'CN-Qia' 'CZ-wet' 'DE-Bay'\
            'DE-Geb' 'DE-Gri' 'DE-Hai' 'DE-Kli' 'DE-Meh' 'DE-Obe' 'DE-Seh' 'DE-SfN' 'DE-Tha'\
            'DE-Wet' 'DK-Fou' 'DK-Lva' 'DK-Ris' 'DK-Sor' 'DK-ZaH' 'ES-ES1' 'ES-ES2' 'ES-LMa'\
            'ES-LgS' 'ES-VDA' 'FI-Hyy' 'FI-Kaa' 'FI-Lom' 'FI-Sod' 'FR-Fon' 'FR-Gri' 'FR-Hes'\
            'FR-LBr' 'FR-Lq1' 'FR-Lq2' 'FR-Pue' 'GF-Guy' 'HU-Bug' 'ID-Pag' 'IE-Ca1' 'IE-Dri'\
            'IT-Amp' 'IT-BCi' 'IT-CA1' 'IT-CA2' 'IT-CA3' 'IT-Col' 'IT-Cpz' 'IT-Isp' 'IT-LMa'\
            'IT-Lav' 'IT-MBo' 'IT-Mal' 'IT-Noe' 'IT-Non' 'IT-PT1' 'IT-Ren' 'IT-Ro1' 'IT-Ro2'\
            'IT-SR2' 'IT-SRo' 'JP-SMF' 'NL-Ca1' 'NL-Hor' 'NL-Loo' 'PL-wet' 'PT-Esp' 'PT-Mi1'\
            'PT-Mi2' 'RU-Che' 'RU-Fyo' 'RU-Zot' 'SD-Dem' 'SE-Deg' 'UK-Gri' 'UK-Ham' 'UK-PL3'\
            'US-AR1' 'US-AR2' 'US-ARM' 'US-Aud' 'US-Bar' 'US-Bkg' 'US-Blo' 'US-Bo1' 'US-Cop'\
            'US-FPe' 'US-GLE' 'US-Goo' 'US-Ha1' 'US-Ho1' 'US-KS2' 'US-Los' 'US-MMS' 'US-MOz'\
            'US-Me2' 'US-Me4' 'US-Me6' 'US-Myb' 'US-NR1' 'US-Ne1' 'US-Ne2' 'US-Ne3' 'US-PFa'\
            'US-Prr' 'US-SP1' 'US-SP2' 'US-SP3' 'US-SRG' 'US-SRM' 'US-Syv' 'US-Ton' 'US-Tw4'\
            'US-Twt' 'US-UMB' 'US-Var' 'US-WCr' 'US-Whs' 'US-Wkg' 'ZA-Kru' 'ZM-Mon')

cd /g/data/w97/mm3972/scripts/PLUMBER2/LSM_VPD_PLUMBER2/nc_files

# Loop through the arrays.
for i in "${!lat[@]}"
do
  echo "site is ${site_name[$i]}, lat = ${lat[$i]} lon = ${lon[$i]}"
  ncks -v climate_class -d longitude,${lon[$i]} -d latitude,${lat[$i]} /g/data/w97/mm3972/data/KÃ¶ppen-Geiger_climate_classification/Beck_KG_V1/Beck_KG_V1_present_0p0083.nc Koppen_Geiger_climate_class_${site_name[$i]}.nc
done
